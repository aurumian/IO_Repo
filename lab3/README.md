# Лабораторная работа 3

**Название:** "Разработка драйверов сетевых устройств"

**Цель работы:**  Получить знания и навыки разработки драйверов сетевых устройств под операционную систему Linux

**Выполнили:** Черезов Игорь Юрьевич Р3400, Черезов Юрий Юрьевич Р3400

## Описание функциональности драйвера

Драйвер создаёт виртуальное сетевое устройство, которое перехватывает пакеты протокола ICMP типа 8 - Echo Request и выводит данные, передаванмые в пакете, в кольцевой буфер.

Драйвер также создаёт файл `/proc/if_var1`, из которого можно считать статистику прехваченных пакетов.

## Инструкция по сборке

`make`

## Инструкция пользователя

Устоновка модуля:

`sudo insmod virt_net_if.ko link=[parent interface name]`

Отключение модуля:

`sudo insmod virt_net_if`

Чтение сообщений из кольцевого буфера:

`dmesg`

Чтение сообщений из `/proc/if_var1`:

`cat /proc/if_var1`


## Примеры использования

```
dmesg
...
[  475.762837] Captured ICMP packet, saddr: 192.168.56.1
[  475.762879] daddr: 192.168.56.101
[  475.762898] Data length: 52. Data:
[  475.762900] abcdefghijklmnopqrstuvwabcdefghi\xa6\xef\xf7J
```

```
cat /proc/if_var1
Captured ICMP packets:
 rx_packets: 4
 tx_packets: 5
```





