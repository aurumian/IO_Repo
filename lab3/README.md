# Лабораторная работа 3

**Название:** "Разработка драйверов сетевых устройств"

**Цель работы:**  Получить знания и навыки разработки драйверов сетевых устройств под операционную систему Linux

**Выполнили:** Черезов Игорь Юрьевич Р3400, Черезов Юрий Юрьевич Р3400

## Описание функциональности драйвера

Драйвер создаёт виртуальное сетевое устройство, которое перехватывает пакеты протокола ICMP типа 8 - Echo Request и выводит данные, передаванмые в пакете, в кольцевой буфер.

Драйвер также создаёт файл `/proc/if_var1`, из которого можно считать статистику прехваченных пакетов.

## Инструкция по сборке

`make`

## Инструкция пользователя

Устоновка модуля:

`sudo insmod virt_net_if.ko link=[parent interface name]`

Отключение модуля:

`sudo insmod virt_net_if`

Чтение сообщений из кольцевого буфера:

`dmesg`

Чтение сообщений из `/proc/if_var1`:

`cat /proc/if_var1`


## Примеры использования

```
dmesg
...

[ 6655.986748] Captured ICMP packet, saddr: 192.168.56.1
[ 6655.986749] daddr: 192.168.56.101
[ 6655.986749] Data length: 52. Data:
[ 6655.986757] 61 62 63 64 65 66 67 68 69 6a 6b 6c 6d 6e 6f 70 71 72 73 74 75 76 77 61 62 63 64 65 66 67 68 69 24 33 36 44 00 01 08 00 06 04 00 02 0a 00 27 00 00 10 c0 a8 
```

```
cat /proc/if_var1
Captured ICMP packets:
 rx_packets: 4
 tx_packets: 5
```





